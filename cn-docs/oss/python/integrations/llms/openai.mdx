---
title: OpenAI
---
<Warning>
**您当前正在查阅的是关于 OpenAI 文本补全模型使用的文档。最新且最受欢迎的 OpenAI 模型是 [聊天补全模型](/oss/langchain/models)。**

除非您明确在使用 `gpt-3.5-turbo-instruct`，否则您可能正在寻找 [这个页面](/oss/integrations/chat/openai/)。
</Warning>

[OpenAI](https://platform.openai.com/docs/introduction) 提供了一系列具有不同能力级别、适用于不同任务的模型。

本示例将介绍如何使用 LangChain 与 OpenAI [模型](https://platform.openai.com/docs/models) 进行交互。

## 概述

### 集成详情

| 类 | 包 | 本地 | 可序列化 | [JS 支持](https://js.langchain.com/docs/integrations/chat/openai) | 下载量 | 版本 |
| :--- | :--- | :---: | :---: |  :---: | :---: | :---: |
| [ChatOpenAI](https://python.langchain.com/api_reference/openai/chat_models/langchain_openai.chat_models.base.ChatOpenAI.html) | [langchain-openai](https://python.langchain.com/api_reference/openai/index.html) | ❌ | beta | ✅ | ![PyPI - Downloads](https://img.shields.io/pypi/dm/langchain-openai?style=flat-square&label=%20) | ![PyPI - Version](https://img.shields.io/pypi/v/langchain-openai?style=flat-square&label=%20) |

## 设置

要访问 OpenAI 模型，您需要创建一个 OpenAI 账户，获取一个 API 密钥，并安装 `langchain-openai` 集成包。

### 凭证

前往 [platform.openai.com](https://platform.openai.com) 注册 OpenAI 并生成一个 API 密钥。完成后，设置 OPENAI_API_KEY 环境变量：

```python
import getpass
import os

if "OPENAI_API_KEY" not in os.environ:
    os.environ["OPENAI_API_KEY"] = getpass.getpass("Enter your OpenAI API key: ")
```

要启用模型调用的自动追踪，请设置您的 [LangSmith](https://docs.langchain.com/langsmith/home) API 密钥：

```python
os.environ["LANGSMITH_API_KEY"] = getpass.getpass("Enter your LangSmith API key: ")
os.environ["LANGSMITH_TRACING"] = "true"
```

### 安装

LangChain OpenAI 集成位于 `langchain-openai` 包中：

```python
pip install -qU langchain-openai
```

如果您需要指定您的组织 ID，可以使用以下代码。但是，如果您只属于单个组织或打算使用您的默认组织，则不需要指定。您可以在此处 [查看您的默认组织](https://platform.openai.com/account/api-keys)。

要指定您的组织，可以使用以下代码：

```python
OPENAI_ORGANIZATION = getpass()

os.environ["OPENAI_ORGANIZATION"] = OPENAI_ORGANIZATION
```

## 实例化

现在我们可以实例化我们的模型对象并生成聊天补全：

```python
from langchain_openai import OpenAI

llm = OpenAI()
```

## 调用

```python
llm.invoke("Hello how are you?")
```

```text
'\n\nI am an AI and do not have emotions like humans do, so I am always functioning at my optimal level. Thank you for asking! How can I assist you today?'
```

## 链式调用

```python
from langchain_core.prompts import PromptTemplate

prompt = PromptTemplate.from_template("How to say {input} in {output_language}:\n")

chain = prompt | llm
chain.invoke(
    {
        "output_language": "German",
        "input": "I love programming.",
    }
)
```

```text
'\nIch liebe Programmieren.'
```

## 使用代理

如果您位于显式代理之后，可以指定 `http_client` 来通过代理

```python
pip install httpx

import httpx

openai = OpenAI(
    model_name="gpt-3.5-turbo-instruct",
    http_client=httpx.Client(proxies="http://proxy.yourcompany.com:8080"),
)
```

---

## API 参考

有关 @[`OpenAI`] llm 所有功能和配置的详细文档，请参阅 API 参考：[python.langchain.com/api_reference/openai/llms/langchain_openai.llms.base.OpenAI.html](https://python.langchain.com/api_reference/openai/llms/langchain_openai.llms.base.OpenAI.html)
