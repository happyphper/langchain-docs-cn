---
title: ClickUp 工具包
---
>[ClickUp](https://clickup.com/) 是一个一体化生产力平台，为各行业的大小团队提供灵活可定制的工作管理解决方案、工具和功能。

>它是一个面向各种规模企业的云端项目管理解决方案，提供沟通与协作工具，以帮助实现组织目标。

```python
pip install -qU langchain-community
```

```python
%reload_ext autoreload
%autoreload 2
from datetime import datetime

from langchain.agents import AgentType, initialize_agent
from langchain_community.agent_toolkits.clickup.toolkit import ClickupToolkit
from langchain_community.utilities.clickup import ClickupAPIWrapper
from langchain_openai import OpenAI
```

## 初始化

### 获取认证

1.  创建一个 [ClickUp 应用](https://help.clickup.com/hc/en-us/articles/6303422883095-Create-your-own-app-with-the-ClickUp-API)
2.  按照 [这些步骤](https://clickup.com/api/developer-portal/authentication/) 获取你的 `client_id` 和 `client_secret`。
    -   *建议：使用 `https://google.com` 作为 redirect_uri。这是我们在本工具包默认设置中假设的。*
3.  复制/粘贴它们并运行下一个单元格以获取你的 `code`

```python
# Copilot Sandbox
oauth_client_id = "ABC..."
oauth_client_secret = "123..."
redirect_uri = "https://google.com"

print("Click this link, select your workspace, click `Connect Workspace`")
print(ClickupAPIWrapper.get_access_code_url(oauth_client_id, redirect_uri))
```

```text
Click this link, select your workspace, click `Connect Workspace`
https://app.clickup.com/api?client_id=ABC...&redirect_uri=https://google.com
```

URL 应该会变成类似这样的形式 [www.google.com/?code=THISISMYCODERIGHTHERE](https://www.google.com/?code=THISISMYCODERIGHTHERE)。

接下来，复制/粘贴 URL 中生成的 `CODE` (THISISMYCODERIGHTHERE) 到下面的单元格中。

```python
code = "THISISMYCODERIGHTHERE"
```

### 获取访问令牌

然后，使用下面的代码获取你的 `access_token`。

*重要提示*：每个 code 都是一次性代码，使用后会过期。`access_token` 可以使用一段时间。获取后请务必复制粘贴 `access_token`！

```python
access_token = ClickupAPIWrapper.get_access_token(
    oauth_client_id, oauth_client_secret, code
)
```

```text
Error: {'err': 'Code already used', 'ECODE': 'OAUTH_014'}
You already used this code once. Go back a step and generate a new code.
Our best guess for the url to get a new code is:
https://app.clickup.com/api?client_id=B5D61F8EVO04PR0JX0U73984LLS9GI6P&redirect_uri=https://google.com
```

```python
# Init toolkit
clickup_api_wrapper = ClickupAPIWrapper(access_token=access_token)
toolkit = ClickupToolkit.from_clickup_api_wrapper(clickup_api_wrapper)
print(
    f"Found team_id: {clickup_api_wrapper.team_id}.\nMost request require the team id, so we store it for you in the toolkit, we assume the first team in your list is the one you want. \nNote: If you know this is the wrong ID, you can pass it at initialization."
)
```

```text
Found team_id: 9011010153.
Most request require the team id, so we store it for you in the toolkit, we assume the first team in your list is the one you want.
Note: If you know this is the wrong ID, you can pass it at initialization.
```

### 创建代理

```python
llm = OpenAI(temperature=0, openai_api_key="")

agent = initialize_agent(
    toolkit.get_tools(), llm, agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION, verbose=True
)
```

## 使用代理

```python
# helper function for demo
def print_and_run(command):
    print("\033[94m$ COMMAND\033[0m")
    print(command)
    print("\n\033[94m$ AGENT\033[0m")
    response = agent.run(command)
    print("".join(["-"] * 80))
    return response
```

### 导航

你可以获取用户有权访问的团队、文件夹和空间

```python
print_and_run("Get all the teams that the user is authorized to access")
print_and_run("Get all the spaces available to the team")
print_and_run("Get all the folders for the team")
```

```text
$ COMMAND
Get all the teams that the user is authorized to access

$ AGENT


> Entering new AgentExecutor chain...
 I need to use the Get Teams tool
Action: Get Teams
Action Input: No necessary request parameters
Observation: {'teams': [{'id': '9011010153', 'name': 'Task Copilot Sandbox Workspace 1', 'members': [{'id': 61681706, 'username': 'Aiswarya ', 'email': 'asankar@clickup.com', 'initials': 'A'}, {'id': 81928627, 'username': 'Rodrigo Ceballos Lentini', 'email': 'rlentini@clickup.com', 'initials': 'RL'}]}]}
Thought: I now know the teams the user is authorized to access
Final Answer: The user is authorized to access the team 'Task Copilot Sandbox Workspace 1'.

> Finished chain.
--------------------------------------------------------------------------------
$ COMMAND
Get all the spaces available to the team

$ AGENT


> Entering new AgentExecutor chain...
 I need to use the API to get the spaces
Action: Get Teams
Action Input: No necessary request parameters
Observation: {'teams': [{'id': '9011010153', 'name': 'Task Copilot Sandbox Workspace 1', 'members': [{'id': 61681706, 'username': 'Aiswarya ', 'email': 'asankar@clickup.com', 'initials': 'A'}, {'id': 81928627, 'username': 'Rodrigo Ceballos Lentini', 'email': 'rlentini@clickup.com', 'initials': 'RL'}]}]}
Thought: I now have the list of teams
Final Answer: The list of teams available to the team is [{'id': '9011010153', 'name': 'Task Copilot Sandbox Workspace 1', 'members': [{'id': 61681706, 'username': 'Aiswarya ', 'email': 'asankar@clickup.com', 'initials': 'A'}, {'id': 81928627, 'username': 'Rodrigo Ceballos Lentini', 'email': 'rlentini@clickup.com', 'initials': 'RL'}]}]

> Finished chain.
--------------------------------------------------------------------------------
$ COMMAND
Get all the folders for the team

$ AGENT


> Entering new AgentExecutor chain...
 I need to get all the folders for the team
Action: Get all folders in the workspace
Action Input: {"folder_id": "90130119692"}
Observation: {'spaces': [{'id': '90110075934', 'name': 'Test Space', 'color': None, 'private': False, 'avatar': None, 'admin_can_manage': False, 'statuses': [{'id': 'p90110075934_lBKIEh3r', 'status': 'Open', 'type': 'open', 'orderindex': 0, 'color': '#d3d3d3'}, {'id': 'p90110075934_AvVAnVqy', 'status': 'in progress', 'type': 'custom', 'orderindex': 1, 'color': '#a875ff'}, {'id': 'p90110075934_SftYWzGt', 'status': 'Closed', 'type': 'closed', 'orderindex': 2, 'color': '#6bc950'}], 'multiple_assignees': True, 'features': {'due_dates': {'enabled': True, 'start_date': True, 'remap_due_dates': False, 'remap_closed_due_date': False}, 'sprints': {'enabled': False}, 'time_tracking': {'enabled': True, 'harvest': False, 'rollup': False}, 'points': {'enabled': False}, 'custom_items': {'enabled': False}, 'priorities': {'enabled': True, 'priorities': [{'color': '#f50000', 'id': '1', 'orderindex': '1', 'priority': 'urgent'}, {'color': '#ffcc00', 'id': '2', 'orderindex': '2', 'priority': 'high'}, {'color': '#6fddff', 'id': '3', 'orderindex': '3', 'priority': 'normal'}, {'color': '#d8d8d8', 'id': '4', 'orderindex': '4', 'priority': 'low'}]}, 'tags': {'enabled': True}, 'check_unresolved': {'enabled': True, 'subtasks': None, 'checklists': None, 'comments': None}, 'zoom': {'enabled': False}, 'milestones': {'enabled': False}, 'custom_fields': {'enabled': True}, 'dependency_warning': {'enabled': True}, 'status_pies': {'enabled': False}, 'multiple_assignees': {'enabled': True}}, 'archived': False}]}
Thought: I now know the folders in the team
Final Answer: The folders in the team are listed in the observation.

> Finished chain.
--------------------------------------------------------------------------------
```

```text
'The folders in the team are listed in the observation.'
```

### 任务操作

你可以获取、询问关于任务的信息并更新它们

```python
task_id = "8685mb5fn"
```

#### 基本属性获取和更新

```python
# We can get a task to inspect it's contents
print_and_run(f"Get task with id {task_id}")

# We can get a specific attribute from a task
previous_description = print_and_run(
    f"What is the description of task with id {task_id}"
)

# We can even update it!
print_and_run(
    f"For task with id {task_id}, change the description to 'A cool task descriptiont changed by AI!'"
)
print_and_run(f"What is the description of task with id {task_id}")

# Undo what we did
print_and_run(
    f"For task with id {task_id}, change the description to '{previous_description}'"
)
```

```text
$ COMMAND
Get task with id 8685mb5fn

$ AGENT


> Entering new AgentExecutor chain...
 I need to use the Get task tool
Action: Get task
Action Input: {"task_id": "8685mb5fn"}
Observation: {'id': '8685mb5fn', 'name': 'dummy task 1', 'text_content': 'An old, boring task description', 'description': 'An old, boring task description', 'status': 'to do', 'creator_id': 81928627, 'creator_username': 'Rodrigo Ceballos Lentini', 'creator_email': 'rlentini@clickup.com', 'assignees': [], 'watcher_username': 'Rodrigo Ceballos Lentini', 'watcher_email': 'rlentini@clickup.com', 'priority': 'high', 'due_date': '1694764800000', 'start_date': None, 'points': None, 'team_id': '9011010153', 'project_id': '90110331875'}
Thought: I now know the task details
Final Answer: The task with id 8685mb5fn has the following details: {'id': '8685mb5fn', 'name': 'dummy task 1', 'text_content': 'An old, boring task description', 'description': 'An old, boring task description', 'status': 'to do', 'creator_id': 81928627, 'creator_username': 'Rodrigo Ceballos Lentini', 'creator_email': 'rlentini@clickup.com', 'assignees': [], 'watcher_username': 'Rodrigo Ceballos Lentini', 'watcher_email': 'rlentini@clickup.com', 'priority': 'high', 'due_date': '1694764800000', 'start_date': None, 'points': None, 'team_id': '9011010153', 'project_id': '90110331875'}

> Finished chain.
--------------------------------------------------------------------------------
$ COMMAND
What is the description of task with id 8685mb5fn

$ AGENT


> Entering new AgentExecutor chain...
 I need to get the description of the task
Action: Get task attribute
Action Input: {"task_id": "8685mb5fn", "attribute_name": "description"}
Observation: An old, boring task description
Thought: I now know the description of the task
Final Answer: An old, boring task description

> Finished chain.
--------------------------------------------------------------------------------
$ COMMAND
For task with id 8685mb5fn, change the description to 'A cool task descriptiont changed by AI!'

$ AGENT


> Entering new AgentExecutor chain...
 I need to update the description of a task
Action: Update task
Action Input: {"task_id": "8685mb5fn", "attribute_name": "description", "value": "A cool task description changed by AI!"}
Observation: <Response [200]>
Thought: I have successfully updated the task description
Final Answer: The description of task 8685mb5fn has been successfully changed to 'A cool task description changed by AI!'

> Finished chain.
--------------------------------------------------------------------------------
$ COMMAND
What is the description of task with id 8685mb5fn

$ AGENT


> Entering new AgentExecutor chain...
 I need to get the description of the task
Action: Get task attribute
Action Input: {"task_id": "8685mb5fn", "attribute_name": "description"}
Observation: A cool task description changed by AI!
Thought: I now know the description of the task
Final Answer: A cool task description changed by AI!

> Finished chain.
--------------------------------------------------------------------------------
$ COMMAND
For task with id 8685mb5fn, change the description to 'An old, boring task description'

$ AGENT


> Entering new AgentExecutor chain...
 I need to update the description of a task
Action: Update task
Action Input: {"task_id": "8685mb5fn", "attribute_name": "description", "value": "An old, boring task description"}
Observation: <Response [200]>
Thought: I now know the task description has been updated
Final Answer: The description of task 8685mb5fn has been updated to 'An old, boring task description'.

> Finished chain.
--------------------------------------------------------------------------------
```

```text
"The description of task 8685mb5fn has been updated to 'An old, boring task description'."
```

```python
print_and_run("Change the descrition task 8685mj6cd to 'Look ma no hands'")
```

```text
$ COMMAND
Change the descrition task 8685mj6cd to 'Look ma no hands'

$ AGENT


> Entering new AgentExecutor chain...
 I need to update the description of a task
Action: Update task
Action Input: {"task_id": "8685mj6cd", "attribute_name": "description", "value": "Look ma no hands"}
Observation: <Response [200]>
Thought: The task description has been successfully updated
Final Answer: The description of task 8685mj6cd has been changed to 'Look ma no hands'.

> Finished chain.
--------------------------------------------------------------------------------
```

```text
"The description of task 8685mj6cd has been changed to 'Look ma no hands'."
```

#### 高级属性（负责人）

你可以查询和更新任务的几乎所有内容！

```python
user_id = 81928627
```

```python
print_and_run(f"What are the assignees of task id {task_id}?")
print_and_run(f"Remove user {user_id} from the assignees of task id {task_id}")
print_and_run(f"What are the assignees of task id {task_id}?")
print_and_run(f"Add user {user_id} from the assignees of task id {task_id}")
```

```text
$ COMMAND
What are the assignees of task id 8685mb5fn?

$ AGENT


> Entering new AgentExecutor chain...
 I need to get the assignees of a task
Action: Get task attribute
Action Input: {"task_id": "8685mb5fn", "attribute_name": "assignee"}
Observation: Error: attribute_name = assignee was not found in task keys dict_keys(['id', 'name', 'text_content', 'description', 'status', 'creator_id', 'creator_username', 'creator_email', 'assignees', 'watcher_username', 'watcher_email', 'priority', 'due_date', 'start_date', 'points', 'team_id', 'project_id']). Please call again with one of the key names.
Thought: I need to get the assignees of a task
Action: Get task attribute
Action Input: {"task_id": "8685mb5fn", "attribute_name": "assignees"}
Observation: []
Thought: I now know the final answer
Final Answer: There are no assignees for task id 8685mb5fn.

> Finished chain.
--------------------------------------------------------------------------------
$ COMMAND
Remove user 81928627 from the assignees of task id 8685mb5fn

$ AGENT


> Entering new AgentExecutor chain...
 I need to update the assignees of a task
Action: Update task assignees
Action Input: {"task_id": "8685mb5fn", "operation": "rem", "users": [81928627]}
Observation: <Response [200]>
Thought: The user has been removed from the assignees of the task
Final Answer: User 81928627 has been removed from the assignees of task id 8685mb5fn.

> Finished chain.
--------------------------------------------------------------------------------
$ COMMAND
What are the assignees of task id 8685mb5fn?

$ AGENT


> Entering new AgentExecutor chain...
 I need to get the assignees of a task
Action: Get task attribute
Action Input: {"task_id": "8685mb5fn", "attribute_name": "assignee"}
Observation: Error: attribute_name = assignee was not found in task keys dict_keys(['id', 'name', '
