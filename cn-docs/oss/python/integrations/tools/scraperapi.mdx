---
title: ScraperAPI
---
仅用两行代码，即可让你的 AI 代理具备浏览网站、搜索 Google 和 Amazon 的能力。

`langchain-scraperapi` 包提供了三个开箱即用的 LangChain 工具，它们由 [ScraperAPI](https://www.scraperapi.com/) 服务提供支持：

| 工具类 | 用途 |
|------------|------------------|
| `ScraperAPITool` | 抓取任意网页的 HTML/文本/Markdown 内容 |
| `ScraperAPIGoogleSearchTool` | 获取结构化的 Google 搜索 SERP 数据 |
| `ScraperAPIAmazonSearchTool` | 获取结构化的 Amazon 产品搜索数据 |

## 概述

### 集成详情

| 包 | 可序列化 | JS 支持 | 包最新版本 |
| :--- | :---: | :---: | :---: |
| [langchain-scraperapi](https://pypi.org/project/langchain-scraperapi/) | ❌ | ❌ |  ![PyPI - Version](https://img.shields.io/pypi/v/langchain-scraperapi?style=flat-square&label=%20) |

## 设置

安装 `langchain-scraperapi` 包：

```python
pip install -qU langchain-scraperapi
```

### 凭证

在 [ScraperAPI](https://www.scraperapi.com/) 创建账户并获取 API 密钥：

```python
import os

if not os.environ.get("SCRAPERAPI_API_KEY"):
    os.environ["SCRAPERAPI_API_KEY"] = "your-api-key"
```

## 实例化

```python
from langchain_scraperapi.tools import ScraperAPITool

tool = ScraperAPITool()
```

## 调用

### 直接使用参数调用

```python
output = tool.invoke(
    {
        "url": "https://langchain.com",
        "output_format": "markdown",
        "render": True,
    }
)
print(output)
```

## 功能特性

### 1. `ScraperAPITool` — 浏览任意网站

调用原始的 ScraperAPI 端点，获取 HTML、渲染后的 DOM、文本或 Markdown。

**调用参数：**

* **`url`** **(必需)** – 目标页面 URL
* **可选参数（映射 ScraperAPI 查询参数）：**
  * `output_format`: `"text"` | `"markdown"` (默认返回原始 HTML)
  * `country_code`: 例如 `"us"`, `"de"`
  * `device_type`: `"desktop"` | `"mobile"`
  * `premium`: `bool` – 使用高级代理
  * `render`: `bool` – 返回 HTML 前执行 JavaScript
  * `keep_headers`: `bool` – 包含响应头

有关完整的参数集，请参阅 [ScraperAPI 请求定制文档](https://docs.scraperapi.com/python/making-requests/customizing-requests)。

```python
from langchain_scraperapi.tools import ScraperAPITool

tool = ScraperAPITool()

html_text = tool.invoke(
    {
        "url": "https://langchain.com",
        "output_format": "markdown",
        "render": True,
    }
)
print(html_text[:300], "…")
```

### 2. `ScraperAPIGoogleSearchTool` — 结构化 Google 搜索

通过 `/structured/google/search` 获取结构化的 SERP 数据。

**调用参数：**

* **`query`** **(必需)** – 自然语言搜索字符串
* **可选参数：** `country_code`, `tld`, `uule`, `hl`, `gl`, `ie`, `oe`, `start`, `num`
* `output_format`: `"json"` (默认) 或 `"csv"`

```python
from langchain_scraperapi.tools import ScraperAPIGoogleSearchTool

google_search = ScraperAPIGoogleSearchTool()

results = google_search.invoke(
    {
        "query": "what is langchain",
        "num": 20,
        "output_format": "json",
    }
)
print(results)
```

### 3. `ScraperAPIAmazonSearchTool` — 结构化 Amazon 搜索

通过 `/structured/amazon/search` 获取结构化的产品结果。

**调用参数：**

* **`query`** **(必需)** – 产品搜索词
* **可选参数：** `country_code`, `tld`, `page`
* `output_format`: `"json"` (默认) 或 `"csv"`

```python
from langchain_scraperapi.tools import ScraperAPIAmazonSearchTool

amazon_search = ScraperAPIAmazonSearchTool()

products = amazon_search.invoke(
    {
        "query": "noise cancelling headphones",
        "tld": "co.uk",
        "page": 2,
    }
)
print(products)
```

## 在智能体中使用

以下是在 AI 智能体中使用这些工具的示例。`ScraperAPITool` 赋予 AI 浏览任意网站、总结文章以及点击链接在页面间导航的能力。

```python
pip install -qU langchain-openai langchain
```

```python
import os

from langchain.agents import create_agent
from langchain_openai import ChatOpenAI
from langchain_scraperapi.tools import ScraperAPITool


os.environ["SCRAPERAPI_API_KEY"] = "your-api-key"
os.environ["OPENAI_API_KEY"] = "your-api-key"

tools = [ScraperAPITool(output_format="markdown")]
model = ChatOpenAI(model="gpt-4o", temperature=0)

agent = create_agent(
    model=model,
    tools=tools,
    system_prompt="你是一个可以帮助用户浏览网站的助手。当被要求浏览网站或链接时，请使用 ScraperAPITool 进行操作，然后根据用户需求基于网站内容提供信息。",
)

response = agent.invoke(
    {"messages": [{"role": "user", "content": "can you browse hacker news and summarize the first website"}]}
)
print(response["messages"][-1].content)
```

---

## API 参考

你可以在下方找到更多关于工具额外参数的信息，以定制你的请求：

* [ScraperAPITool](https://docs.scraperapi.com/python/making-requests/customizing-requests)
* [ScraperAPIGoogleSearchTool](https://docs.scraperapi.com/python/make-requests-with-scraperapi-in-python/scraperapi-structured-data-collection-in-python/google-serp-api-structured-data-in-python)
* [ScraperAPIAmazonSearchTool](https://docs.scraperapi.com/python/make-requests-with-scraperapi-in-python/scraperapi-structured-data-collection-in-python/amazon-search-api-structured-data-in-python)

LangChain 包装器直接暴露了这些参数。
