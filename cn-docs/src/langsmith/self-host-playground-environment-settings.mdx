---
title: 使用环境变量配置模型提供商
sidebarTitle: Use environment variables for model providers
---
<Note>
此功能仅在 Helm chart 版本 0.10.27（应用版本 0.10.74）及更高版本中可用。
</Note>

许多模型提供商支持通过环境变量设置凭据和其他配置选项。这对于自托管部署非常有用，可以避免在代码或配置文件中硬编码敏感信息。在 LangSmith 中，大多数模型交互是通过 `playground` 服务完成的，该服务允许您直接在 Pod 上配置许多此类环境变量。这有助于避免在 UI 中设置凭据。

## 要求

* 一个运行着 `playground` 服务的自托管 LangSmith 实例。
* 您要配置的提供商必须支持通过环境变量进行配置。请查阅该提供商的 Chat Model [文档](https://python.langchain.com/docs/integrations/providers/) 以获取更多信息。
* 您可能需要附加到 `playground` 服务的密钥/角色。
  * 请注意，对于 IRSA，您可能需要授予 `langsmith-playground` 服务账户必要的权限，以访问您云提供商中的密钥或角色。

## 配置

根据上述参数，您可以配置您的 LangSmith 实例，使其为模型提供商使用环境变量。您可以通过修改 LangSmith Helm Chart 安装的 `langsmith_config.yaml` 文件或 Docker 安装的 `docker-compose.yaml` 文件来完成此操作。

<CodeGroup>

```yaml Helm
playground:
  deployment:
    extraEnv:
      - name: OPENAI_BASE_URL
        value: https://<my_proxy_url>
      - name: OPENAI_API_KEY
        valueFrom:
          secretKeyRef:
            name: <your_secret_name>
            key: api_key
  serviceAccount: # 如果您想使用 IRSA 或工作负载身份，这会很有用
    annotations:
      eks.amazonaws.com/role-arn: <your_role_arn>
```

```yaml Docker
# 在您的 docker-compose.yaml 文件中
langchain-playground:
  environment:
    .. # 其他环境变量
    - OPENAI_BASE_URL=https://<my_proxy_url>
    - OPENAI_API_KEY=<your_key> # 这将在 .env 文件中设置
```

</CodeGroup>
