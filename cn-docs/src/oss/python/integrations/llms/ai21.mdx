---
title: AI21LLM
---
:::caution 此服务已弃用。
请参阅[此页面](https://python.langchain.com/docs/integrations/chat/ai21/)以获取更新后的 ChatAI21 对象。:::

本示例将介绍如何使用 LangChain 与 `AI21` Jurassic 系列模型进行交互。如需使用 Jamba 模型，请改用 [ChatAI21 对象](https://python.langchain.com/docs/integrations/chat/ai21/)。

[查看 LangChain 上完整的 AI21 模型和工具列表。](https://pypi.org/project/langchain-ai21/)

## 安装

```python
!pip install -qU langchain-ai21
```

## 环境设置

我们需要获取一个 [AI21 API 密钥](https://docs.ai21.com/) 并设置 `AI21_API_KEY` 环境变量：

```python
import os
from getpass import getpass

if "AI21_API_KEY" not in os.environ:
    os.environ["AI21_API_KEY"] = getpass()
```

## 用法

```python
from langchain_ai21 import AI21LLM
from langchain_core.prompts import PromptTemplate

template = """Question: {question}

Answer: Let's think step by step."""

prompt = PromptTemplate.from_template(template)

model = AI21LLM(model="j2-ultra")

chain = prompt | model

chain.invoke({"question": "What is LangChain?"})
```

```text
'\nLangChain is a (database)\nLangChain is a database for storing and processing documents'
```

# AI21 上下文答案

您可以使用 AI21 的上下文答案模型，它接收作为上下文的文本或文档以及一个问题，并完全基于此上下文返回答案。

这意味着，如果您的答案不在文档中，模型将予以说明（而不是提供错误答案）。

```python
from langchain_ai21 import AI21ContextualAnswers

tsm = AI21ContextualAnswers()

response = tsm.invoke(input={"context": "Your context", "question": "Your question"})
```

您也可以将其与链（chains）、输出解析器（output parsers）和向量数据库（vector DBs）结合使用。

```python
from langchain_ai21 import AI21ContextualAnswers
from langchain_core.output_parsers import StrOutputParser

tsm = AI21ContextualAnswers()
chain = tsm | StrOutputParser()

response = chain.invoke(
    {"context": "Your context", "question": "Your question"},
)
```
