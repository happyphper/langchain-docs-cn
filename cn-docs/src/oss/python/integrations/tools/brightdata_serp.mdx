---
title: BrightDataSERP
description: 使用 Bright Data 的 SERP API 进行地理定位的搜索引擎查询
---
[Bright Data](https://brightdata.com/) 提供了一个强大的 SERP API，允许您对搜索引擎（Google、Bing、DuckDuckGo、Yandex）进行查询，并支持地理定位和高级自定义选项，这对于需要实时网络信息的 AI 智能体特别有用。

## 概述

### 集成详情

|类|包|可序列化|JS 支持|版本|
|:--|:--|:-:|:-:|:-:|
|[BrightDataSERP](https://pypi.org/project/langchain-brightdata/)|[langchain-brightdata](https://pypi.org/project/langchain-brightdata/)|✅|❌|![PyPI - Version](https://img.shields.io/pypi/v/langchain-brightdata?style=flat-square&label=%20)|

### 工具特性

|原生异步|返回工件|返回数据|定价|
|:-:|:-:|:--|:-:|
|❌|❌|标题、URL、摘要、位置和其他搜索结果数据|需要 Bright Data 账户|

## 设置

该集成位于 `langchain-brightdata` 包中。
pip install langchain-brightdata

### 凭证

您需要一个 Bright Data API 密钥才能使用此工具。您可以将其设置为环境变量：

```python
import os

os.environ["BRIGHT_DATA_API_KEY"] = "your-api-key"
```

或者在初始化工具时直接传入：

```python
from langchain_brightdata import BrightDataSERP

serp_tool = BrightDataSERP(bright_data_api_key="your-api-key")
```

## 实例化

这里我们展示如何实例化 BrightDataSERP 工具。该工具允许您使用各种自定义选项执行搜索引擎查询，包括地理定位、语言偏好、设备类型模拟以及使用 Bright Data 的 SERP API 的特定搜索类型。

该工具在实例化时接受各种参数：

- `bright_data_api_key` (必需, str): 用于身份验证的 Bright Data API 密钥。
- `zone` (可选, str): SERP API 的 Bright Data 区域名称。默认为 "serp"。您可以在 [Bright Data 控制面板](https://brightdata.com/cp/zones) 中配置自定义区域。
- `search_engine` (可选, str): 用于查询的搜索引擎。默认为 "google"。其他选项包括 "bing"、"yahoo"、"yandex"、"duckduckgo" 等。
- `country` (可选, str): 用于本地化搜索结果的两个字母的国家代码（例如，"us"、"gb"、"de"、"jp"）。默认为 "us"。
- `language` (可选, str): 搜索结果的两个字母的语言代码（例如，"en"、"es"、"fr"、"de"）。默认为 "en"。
- `results_count` (可选, int): 要返回的搜索结果数量。默认为 10。最大值通常为 100。
- `search_type` (可选, str): 要执行的搜索类型。选项包括：
  - None (默认): 常规网页搜索
  - "isch": 图片搜索
  - "shop": 购物搜索
  - "nws": 新闻搜索
  - "jobs": 职位搜索
- `device_type` (可选, str): 为搜索模拟的设备类型。选项包括：
  - None (默认): 桌面设备
  - "mobile": 通用移动设备
  - "ios": iOS 设备 (iPhone)
  - "android": Android 设备
- `parse_results` (可选, bool): 是否返回解析后的 JSON 结果。默认为 False，返回原始 HTML 响应。

## 调用

### 基本用法

```python
from langchain_brightdata import BrightDataSERP

# 初始化工具
serp_tool = BrightDataSERP(
    bright_data_api_key="your-api-key"  # 如果在环境变量中设置，则为可选
)

# 运行基本搜索
results = serp_tool.invoke("latest AI research papers")

print(results)
```

### 带参数的高级用法

```python
from langchain_brightdata import BrightDataSERP

# 使用默认参数初始化
serp_tool = BrightDataSERP(
    bright_data_api_key="your-api-key",
    search_engine="google",  # 默认
    country="us",  # 默认
    language="en",  # 默认
    results_count=10,  # 默认
    parse_results=True,  # 获取结构化的 JSON 结果
)

# 为此搜索使用特定参数
results = serp_tool.invoke(
    {
        "query": "best electric vehicles",
        "country": "de",  # 获取如同从德国搜索的结果
        "language": "de",  # 获取德语结果
        "search_type": "shop",  # 获取购物结果
        "device_type": "mobile",  # 模拟移动设备
        "results_count": 15,
    }
)

print(results)
```

## 自定义选项

BrightDataSERP 工具接受多个参数进行自定义：

|参数|类型|描述|
|:--|:--|:--|
|`query`|str|要执行的搜索查询|
|`zone`|str|Bright Data 区域名称 (默认: "serp")|
|`search_engine`|str|要使用的搜索引擎 (默认: "google")|
|`country`|str|用于本地化结果的两个字母国家代码 (默认: "us")|
|`language`|str|两个字母的语言代码 (默认: "en")|
|`results_count`|int|要返回的结果数量 (默认: 10)|
|`search_type`|str|搜索类型: None (网页), "isch" (图片), "shop", "nws" (新闻), "jobs"|
|`device_type`|str|设备类型: None (桌面), "mobile", "ios", "android"|
|`parse_results`|bool|是否返回结构化的 JSON (默认: False)|

## 区域配置

Bright Data 使用"区域"来管理不同的 API 配置。您可以在初始化时设置区域，也可以在每个请求中覆盖它。

### 在初始化时设置区域

```python
from langchain_brightdata import BrightDataSERP

# 使用自定义区域初始化
serp_tool = BrightDataSERP(
    bright_data_api_key="your-api-key",
    zone="my_custom_serp_zone"
)
```

### 在每个请求中覆盖区域

```python
# 为特定请求覆盖区域
results = serp_tool.invoke({
    "query": "AI news",
    "zone": "different_zone"
})
```

区域名称必须与您在 [Bright Data 控制面板](https://brightdata.com/cp/zones) 中配置的区域匹配。

## 在智能体中使用

```python
from langchain_brightdata import BrightDataSERP
from langchain_google_genai import ChatGoogleGenerativeAI
from langchain.agents import create_agent


# 初始化 LLM
llm = ChatGoogleGenerativeAI(model="gemini-2.5-flash", google_api_key="your-api-key")

# 初始化 Bright Data SERP 工具
serp_tool = BrightDataSERP(
    bright_data_api_key="your-api-key",
    search_engine="google",
    country="us",
    language="en",
    results_count=10,
    parse_results=True,
)

# 创建智能体
agent = create_agent(llm, [serp_tool])

# 提供用户查询
user_input = "Search for 'best electric vehicles' shopping results in Germany in German using mobile."

# 逐步流式传输智能体的输出
for step in agent.stream(
    {"messages": user_input},
    stream_mode="values",
):
    step["messages"][-1].pretty_print()
```

---

## API 参考

- [Bright Data API 文档](https://docs.brightdata.com/scraping-automation/serp-api/introduction)
