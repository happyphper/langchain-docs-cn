---
title: Daytonaæ•°æ®åˆ†æå·¥å…·
---
æœ¬æŒ‡å—æä¾›äº†å¿«é€Ÿå…¥é—¨ `DaytonaDataAnalysisTool` çš„æ¦‚è§ˆã€‚

<Tip>
    **è¯¦ç»†ä½¿ç”¨ç¤ºä¾‹**

    å…³äºæ­¤å·¥å…·çš„è¯¦ç»†ä½¿ç”¨ç¤ºä¾‹ï¼Œè¯·å‚é˜… [Daytona æ–‡æ¡£](https://www.daytona.io/docs/en/langchain-data-analysis)ã€‚
</Tip>

## æ¦‚è¿°

### è¯¦ç»†ä¿¡æ¯

| ç±» | åŒ… | å¯åºåˆ—åŒ– | JS æ”¯æŒ |
| :--- | :--- | :---: | :---: |
| [`DaytonaDataAnalysisTool`](https://github.com/daytonaio/langchain_daytona_data_analysis/blob/main/langchain_daytona_data_analysis/tools.py) | [`langchain-daytona-data-analysis`](https://pypi.org/project/langchain-daytona-data-analysis/) | âŒ | âŒ |

### ç‰¹æ€§

- ğŸ”’ **å®‰å…¨çš„æ²™ç›’åŒ–æ‰§è¡Œ** - åœ¨éš”ç¦»ç¯å¢ƒä¸­è¿è¡Œ Python ä»£ç 
- ğŸ **Python æ•°æ®åˆ†æ** - åˆ©ç”¨å®Œæ•´çš„ Python èƒ½åŠ›æ‰§è¡Œæ•°æ®åˆ†æä»»åŠ¡
- ğŸ“ **æ–‡ä»¶ç®¡ç†** - å‘æ²™ç›’ä¸Šä¼ æ–‡ä»¶æˆ–ä»æ²™ç›’ä¸‹è½½æ–‡ä»¶
- ğŸ”„ **å¤šæ­¥éª¤å·¥ä½œæµ** - æ”¯æŒå¤æ‚ã€å¤šæ­¥éª¤çš„æ•°æ®åˆ†ææµç¨‹
- ğŸ¯ **è‡ªå®šä¹‰ç»“æœå¤„ç†** - ä½¿ç”¨å›è°ƒå‡½æ•°å¤„ç†æ‰§è¡Œç»“æœ
- ğŸ“¦ **åŒ…ç®¡ç†** - åœ¨æ²™ç›’ä¸­åŠ¨æ€å®‰è£… Python åŒ…

---

## è®¾ç½®

è¦ä½¿ç”¨ `DaytonaDataAnalysisTool`ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ª Daytona [è´¦æˆ·](https://app.daytona.io/)ï¼Œè·å–ä¸€ä¸ª [API å¯†é’¥](https://app.daytona.io/dashboard/keys)ï¼Œå¹¶å®‰è£… `langchain-daytona-data-analysis` é›†æˆåŒ…ã€‚

### å‡­è¯

ä½ å¿…é¡»ä¸º Daytona é…ç½®å‡­è¯ã€‚ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸‰ç§æ–¹å¼ä¹‹ä¸€è¿›è¡Œé…ç½®ï¼š

**1. è®¾ç½® `DAYTONA_API_KEY` ç¯å¢ƒå˜é‡ï¼š**

```bash Set API key icon="key"
export DAYTONA_API_KEY="your-daytona-api-key"
```

**2. å°†å…¶æ·»åŠ åˆ°é¡¹ç›®æ ¹ç›®å½•çš„ `.env` æ–‡ä»¶ä¸­ï¼š**

```env Set API key icon="key"
DAYTONA_API_KEY=your-daytona-api-key
```

**3. åœ¨å®ä¾‹åŒ– `DaytonaDataAnalysisTool` æ—¶ç›´æ¥ä¼ é€’ API å¯†é’¥ï¼š**

```python Set API key icon="key"
tool = DaytonaDataAnalysisTool(daytona_api_key="your-daytona-api-key")
```

ä¸ºäº†è·å¾—å·¥å…·è°ƒç”¨çš„æœ€ä½³å¯è§‚æµ‹æ€§/<Tooltip tip="è®°å½•æ¨¡å‹æ‰§è¡Œçš„æ¯ä¸€æ­¥ä»¥è¿›è¡Œè°ƒè¯•å’Œæ”¹è¿›">è¿½è¸ª</Tooltip>ï¼Œè®¾ç½® LangSmith ä¹Ÿå¾ˆæœ‰å¸®åŠ©ï¼ˆä½†ä¸æ˜¯å¿…éœ€çš„ï¼‰ã€‚è¦å¯ç”¨è‡ªåŠ¨è¿½è¸ªï¼Œè¯·è®¾ç½®ä½ çš„ [LangSmith](https://docs.langchain.com/langsmith/home) API å¯†é’¥ï¼š

```python Enable tracing icon="flask"
os.environ["LANGSMITH_API_KEY"] = getpass.getpass("Enter your LangSmith API key: ")
os.environ["LANGSMITH_TRACING"] = "true"
```

### å®‰è£…

`DaytonaDataAnalysisTool` ä½äº `langchain-daytona-data-analysis` åŒ…ä¸­ï¼š

### ä» PyPI å®‰è£…

ç›´æ¥ä» PyPI å®‰è£…è¯¥åŒ…ï¼š

<CodeGroup>
```bash pip
pip install langchain-daytona-data-analysis
```

```bash uv
uv add langchain-daytona-data-analysis
```

```bash poetry
poetry add langchain-daytona-data-analysis
```

</CodeGroup>

### ä» GitHub å®‰è£…

ä» GitHub å®‰è£…æœ€æ–°çš„å¼€å‘ç‰ˆæœ¬ï¼š

<CodeGroup>
```bash pip
pip install git+https://github.com/daytonaio/langchain_daytona_data_analysis
```

```bash uv
uv add git+https://github.com/daytonaio/langchain_daytona_data_analysis
```

```bash poetry
poetry add git+https://github.com/daytonaio/langchain_daytona_data_analysis
```

</CodeGroup>

---

## å®ä¾‹åŒ–

å¯¼å…¥å¹¶å®ä¾‹åŒ–è¯¥å·¥å…·ï¼š

```python Initialize tool instance icon="robot"
from langchain_daytona_data_analysis import DaytonaDataAnalysisTool
from daytona import ExecutionArtifacts

# å¯é€‰åœ°ï¼Œä½ å¯ä»¥ä¼ é€’ä¸€ä¸ª on_result å›è°ƒå‡½æ•°ã€‚
# æ­¤å›è°ƒå‡½æ•°å…è®¸ä½ å¯¹æ•°æ®åˆ†æç»“æœåº”ç”¨è‡ªå®šä¹‰é€»è¾‘ã€‚
# ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä¿å­˜è¾“å‡ºã€æ˜¾ç¤ºå›¾è¡¨æˆ–è§¦å‘å…¶ä»–æ“ä½œã€‚
def process_data_analysis_result(result: ExecutionArtifacts):
    print(result)

tool = DaytonaDataAnalysisTool(
    daytona_api_key="your-daytona-api-key", # ä»…å½“æœªè®¾ç½®ä¸º DAYTONA_API_KEY ç¯å¢ƒå˜é‡æ—¶æ‰éœ€è¦ä¼ é€’
    on_result=process_data_analysis_result
)
```

---

## è°ƒç”¨

### ç›´æ¥è°ƒç”¨

```python Call tool icon="rocket"
tool.invoke({'data_analysis_python_code': "print('Hello World')"})
```

### ä½œä¸º `ToolCall` è°ƒç”¨

```python ToolCall icon="toolbox"
model_generated_tool_call = {
    "args": {'data_analysis_python_code': "print('Hello World')"},
    "id": "1",
    "name": tool.name,
    "type": "tool_call",
}

tool.invoke(model_generated_tool_call)
```

### åœ¨æ™ºèƒ½ä½“ï¼ˆagentï¼‰ä¸­ä½¿ç”¨

```python Agent with tool icon="robot"
from langchain.agents import create_agent
from langchain_anthropic import ChatAnthropic

model = ChatAnthropic(
    model_name="claude-haiku-4-5-20251001",
    temperature=0,
    max_tokens_to_sample=1024,
    timeout=None,
    max_retries=2,
    stop=None
)

agent = create_agent(model, tools=[tool])
```

---

## é™„åŠ åŠŸèƒ½

`DaytonaDataAnalysisTool` æä¾›äº†å¤šç§æ–¹æ³•æ¥ç®¡ç†æ–‡ä»¶å’Œæ²™ç›’ç¯å¢ƒï¼š

### æ–‡ä»¶ç®¡ç†

**ä¸Šä¼ æ–‡ä»¶åˆ°æ²™ç›’ï¼š**

```python
with open("sales_data.csv", "rb") as f:
    uploaded = tool.upload_file(
        f,
        "CSV file containing sales data with columns: id, date, product, revenue"
    )
```

**ä»æ²™ç›’ä¸‹è½½æ–‡ä»¶ï¼š**

```python
file_bytes = tool.download_file("/home/daytona/results.csv")
```

**ç§»é™¤å·²ä¸Šä¼ çš„æ–‡ä»¶ï¼š**

```python
tool.remove_uploaded_file(uploaded)
```

### åŒ…ç®¡ç†

**åœ¨æ²™ç›’ä¸­å®‰è£… Python åŒ…ï¼š**

```python
# å•ä¸ªåŒ…
tool.install_python_packages("pandas")

# å¤šä¸ªåŒ…
tool.install_python_packages(["numpy", "matplotlib", "seaborn"])
```

<Note>
æœ‰å…³é¢„å®‰è£…åŒ…çš„åˆ—è¡¨ï¼Œè¯·å‚é˜… [Daytona é»˜è®¤å¿«ç…§æ–‡æ¡£](https://www.daytona.io/docs/en/snapshots/#default-snapshot)ã€‚
</Note>

### æ²™ç›’ç®¡ç†

**è®¿é—®æ²™ç›’å®ä¾‹ï¼š**

```python
sandbox = tool.get_sandbox()
```

**å®Œæˆåå…³é—­æ²™ç›’ï¼š**

```python
tool.close()  # æ¸…ç†èµ„æºå¹¶åˆ é™¤æ²™ç›’
```

<Warning>
å½“ä½ å®Œæˆæ‰€æœ‰æ•°æ®åˆ†æä»»åŠ¡åï¼Œè¯·è°ƒç”¨ `tool.close()` ä»¥æ­£ç¡®æ¸…ç†èµ„æºå¹¶é¿å…ä¸å¿…è¦çš„ä½¿ç”¨ã€‚
</Warning>

---

## API å‚è€ƒ

æœ‰å…³ `DaytonaDataAnalysisTool` æ‰€æœ‰åŠŸèƒ½å’Œé…ç½®çš„è¯¦ç»†æ–‡æ¡£ï¼Œè¯·å‰å¾€ [API å‚è€ƒ](https://www.daytona.io/docs/en/langchain-data-analysis#10-api-reference)ã€‚
