---
title: Reddit æœç´¢
---
åœ¨æœ¬ç¬”è®°æœ¬ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹  Reddit æœç´¢å·¥å…·çš„å·¥ä½œåŸç†ã€‚
é¦–å…ˆï¼Œè¯·ç¡®ä¿å·²é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£… prawï¼š

```python
pip install -qU  praw
```

ç„¶åï¼Œæ‚¨éœ€è¦è®¾ç½®æ­£ç¡®çš„ API å¯†é’¥å’Œç¯å¢ƒå˜é‡ã€‚æ‚¨éœ€è¦åˆ›å»ºä¸€ä¸ª Reddit ç”¨æˆ·è´¦æˆ·å¹¶è·å–å‡­è¯ã€‚å› æ­¤ï¼Œè¯·è®¿é—® [www.reddit.com](https://www.reddit.com) å¹¶æ³¨å†Œä¸€ä¸ª Reddit ç”¨æˆ·è´¦æˆ·ã€‚
æ¥ç€ï¼Œè®¿é—® [www.reddit.com/prefs/apps](https://www.reddit.com/prefs/apps) å¹¶åˆ›å»ºä¸€ä¸ªåº”ç”¨ä»¥è·å–æ‚¨çš„å‡­è¯ã€‚
æ‚¨åº”è¯¥ä»åˆ›å»ºåº”ç”¨çš„è¿‡ç¨‹ä¸­è·å¾— `client_id` å’Œ `secret`ã€‚ç°åœ¨ï¼Œæ‚¨å¯ä»¥å°†è¿™äº›å­—ç¬¦ä¸²ç²˜è´´åˆ° `client_id` å’Œ `client_secret` å˜é‡ä¸­ã€‚
æ³¨æ„ï¼š`user_agent` å¯ä»¥å¡«å†™ä»»æ„å­—ç¬¦ä¸²ã€‚

```python
client_id = ""
client_secret = ""
user_agent = ""
```

```python
from langchain_community.tools.reddit_search.tool import RedditSearchRun
from langchain_community.utilities.reddit_search import RedditSearchAPIWrapper

search = RedditSearchRun(
    api_wrapper=RedditSearchAPIWrapper(
        reddit_client_id=client_id,
        reddit_client_secret=client_secret,
        reddit_user_agent=user_agent,
    )
)
```

ç„¶åï¼Œæ‚¨å¯ä»¥è®¾ç½®æ‚¨çš„æŸ¥è¯¢ï¼Œä¾‹å¦‚ï¼Œæ‚¨æƒ³è¦æŸ¥è¯¢å“ªä¸ª subredditã€å¸Œæœ›è¿”å›å¤šå°‘å¸–å­ã€å¸Œæœ›ç»“æœå¦‚ä½•æ’åºç­‰ã€‚

```python
from langchain_community.tools.reddit_search.tool import RedditSearchSchema

search_params = RedditSearchSchema(
    query="beginner", sort="new", time_filter="week", subreddit="python", limit="2"
)
```

æœ€åï¼Œè¿è¡Œæœç´¢å¹¶è·å–ç»“æœã€‚

```python
result = search.run(tool_input=search_params.dict())
```

```python
print(result)
```

ä»¥ä¸‹æ˜¯æ‰“å°ç»“æœçš„ç¤ºä¾‹ã€‚
æ³¨æ„ï¼šæ ¹æ® subreddit ä¸­çš„æœ€æ–°å¸–å­ï¼Œæ‚¨å¯èƒ½ä¼šå¾—åˆ°ä¸åŒçš„è¾“å‡ºï¼Œä½†æ ¼å¼åº”ç›¸ä¼¼ã€‚

> åœ¨ r/python ä¸­æœç´¢åˆ° 2 ä¸ªå¸–å­ï¼š
> å¸–å­æ ‡é¢˜ï¼š'åœ¨ Visual Studio Code ä¸­è®¾ç½® Github Copilot'
> ç”¨æˆ·ï¼šFeisty-Recording-715
> Subredditï¼šr/Pythonï¼š
> æ­£æ–‡ï¼šğŸ› ï¸ æœ¬æ•™ç¨‹éå¸¸é€‚åˆå¸Œæœ›åŠ å¼ºç‰ˆæœ¬æ§åˆ¶ç†è§£çš„åˆå­¦è€…ï¼Œæˆ–å¯»æ±‚åœ¨ Visual Studio Code ä¸­å¿«é€Ÿå‚è€ƒ GitHub è®¾ç½®çš„ç»éªŒä¸°å¯Œçš„å¼€å‘è€…ã€‚
>
>ğŸ“ é€šè¿‡æœ¬è§†é¢‘ï¼Œæ‚¨å°†æŒæ¡è‡ªä¿¡åœ°ç®¡ç†ä»£ç åº“ã€ä¸ä»–äººåä½œä»¥åŠä¸º GitHub ä¸Šçš„å¼€æºé¡¹ç›®åšå‡ºè´¡çŒ®çš„æŠ€èƒ½ã€‚
>
>
>è§†é¢‘é“¾æ¥ï¼š[youtu.be/IdT1BhrSfdo?si=mV7xVpiyuhlD8Zrw](https://youtu.be/IdT1BhrSfdo?si=mV7xVpiyuhlD8Zrw)
>
>æ¬¢è¿æ‚¨çš„åé¦ˆ
> å¸–å­ URLï¼š[www.reddit.com/r/Python/comments/1823wr7/setup_github_copilot_in_visual_studio_code/](https://www.reddit.com/r/Python/comments/1823wr7/setup_github_copilot_in_visual_studio_code/)
> å¸–å­ç±»åˆ«ï¼šN/Aã€‚
> å¾—åˆ†ï¼š0
>
>å¸–å­æ ‡é¢˜ï¼š'ä½¿ç”¨ pygame å’Œ PySide6 åˆ¶ä½œçš„ä¸­å›½è·³æ£‹æ¸¸æˆï¼Œæ”¯æŒè‡ªå®šä¹‰æœºå™¨äºº'
>ç”¨æˆ·ï¼šHenryChess
>Subredditï¼šr/Pythonï¼š
> æ­£æ–‡ï¼šGitHub é“¾æ¥ï¼š[github.com/henrychess/pygame-chinese-checkers](https://github.com/henrychess/pygame-chinese-checkers)
>
>æˆ‘ä¸ç¡®å®šè¿™ç®—æ˜¯åˆå­¦è€…è¿˜æ˜¯ä¸­çº§æ°´å¹³ã€‚æˆ‘è®¤ä¸ºæˆ‘ä»åœ¨åˆå­¦è€…é˜¶æ®µï¼Œæ‰€ä»¥æˆ‘å°†å…¶æ ‡è®°ä¸ºåˆå­¦è€…ã€‚
>
>è¿™æ˜¯ä¸€ä¸ªæ”¯æŒ 2 åˆ° 3 åç©å®¶çš„ä¸­å›½è·³æ£‹ï¼ˆåˆå Sternhalmaï¼‰æ¸¸æˆã€‚æˆ‘ç¼–å†™çš„æœºå™¨äººå¾ˆå®¹æ˜“å‡»è´¥ï¼Œå› ä¸ºå®ƒä»¬ä¸»è¦ç”¨äºè°ƒè¯•ä»£ç çš„æ¸¸æˆé€»è¾‘éƒ¨åˆ†ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥ç¼–å†™è‡ªå·±çš„è‡ªå®šä¹‰æœºå™¨äººã€‚GitHub é¡µé¢ä¸Šæœ‰æŒ‡å—ã€‚
> å¸–å­ URLï¼š[www.reddit.com/r/Python/comments/181xq0u/a_chinese_checkers_game_made_with_pygame_and/](https://www.reddit.com/r/Python/comments/181xq0u/a_chinese_checkers_game_made_with_pygame_and/)
> å¸–å­ç±»åˆ«ï¼šN/Aã€‚
 > å¾—åˆ†ï¼š1

## åœ¨æ™ºèƒ½ä½“é“¾ä¸­ä½¿ç”¨å·¥å…·

Reddit æœç´¢åŠŸèƒ½ä¹Ÿä½œä¸ºå¤šè¾“å…¥å·¥å…·æä¾›ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æ”¹ç¼–äº†[æ–‡æ¡£ä¸­çš„ç°æœ‰ä»£ç ](https://python.langchain.com/v0.1/docs/modules/memory/agent_with_memory/)ï¼Œå¹¶ä½¿ç”¨ ChatOpenAI åˆ›å»ºä¸€ä¸ªå…·æœ‰è®°å¿†çš„æ™ºèƒ½ä½“é“¾ã€‚è¯¥æ™ºèƒ½ä½“é“¾èƒ½å¤Ÿä» Reddit æ‹‰å–ä¿¡æ¯ï¼Œå¹¶ä½¿ç”¨è¿™äº›å¸–å­æ¥å“åº”åç»­è¾“å…¥ã€‚

è¦è¿è¡Œæ­¤ç¤ºä¾‹ï¼Œè¯·æ·»åŠ æ‚¨çš„ Reddit API è®¿é—®ä¿¡æ¯ï¼Œå¹¶ä» [OpenAI API](https://help.openai.com/en/articles/4936850-where-do-i-find-my-api-key) è·å– OpenAI å¯†é’¥ã€‚

```python
# æ”¹ç¼–è‡ª /docs/modules/agents/how_to/sharedmemory_for_tools çš„ä»£ç 

from langchain.agents import AgentExecutor, StructuredChatAgent
from langchain_classic.chains import LLMChain
from langchain.memory import ConversationBufferMemory, ReadOnlySharedMemory
from langchain_community.tools.reddit_search.tool import RedditSearchRun
from langchain_community.utilities.reddit_search import RedditSearchAPIWrapper
from langchain_core.prompts import PromptTemplate
from langchain.tools import Tool
from langchain_openai import ChatOpenAI

# æä¾› Reddit çš„å¯†é’¥
client_id = ""
client_secret = ""
user_agent = ""
# æä¾› OpenAI çš„å¯†é’¥
openai_api_key = ""

template = """è¿™æ˜¯äººç±»ä¸æœºå™¨äººä¹‹é—´çš„å¯¹è¯ï¼š

{chat_history}

ä¸º {input} ç¼–å†™å¯¹è¯æ‘˜è¦ï¼š
"""

prompt = PromptTemplate(input_variables=["input", "chat_history"], template=template)
memory = ConversationBufferMemory(memory_key="chat_history")

prefix = """ä¸äººç±»è¿›è¡Œå¯¹è¯ï¼Œå°½å¯èƒ½å›ç­”ä»¥ä¸‹é—®é¢˜ã€‚æ‚¨å¯ä»¥è®¿é—®ä»¥ä¸‹å·¥å…·ï¼š"""
suffix = """å¼€å§‹ï¼"

{chat_history}
é—®é¢˜ï¼š{input}
{agent_scratchpad}"""

tools = [
    RedditSearchRun(
        api_wrapper=RedditSearchAPIWrapper(
            reddit_client_id=client_id,
            reddit_client_secret=client_secret,
            reddit_user_agent=user_agent,
        )
    )
]

prompt = StructuredChatAgent.create_prompt(
    prefix=prefix,
    tools=tools,
    suffix=suffix,
    input_variables=["input", "chat_history", "agent_scratchpad"],
)

llm = ChatOpenAI(temperature=0, openai_api_key=openai_api_key)

llm_chain = LLMChain(llm=llm, prompt=prompt)
agent = StructuredChatAgent(llm_chain=llm_chain, verbose=True, tools=tools)
agent_chain = AgentExecutor.from_agent_and_tools(
    agent=agent, verbose=True, memory=memory, tools=tools
)

# å›ç­”ç¬¬ä¸€ä¸ªæç¤ºéœ€è¦ä½¿ç”¨ Reddit æœç´¢å·¥å…·ã€‚
agent_chain.run(input="æœ¬å‘¨ r/langchain ä¸Šæœ€æ–°çš„å¸–å­æ˜¯ä»€ä¹ˆï¼Ÿ")
# å›ç­”åç»­æç¤ºä¼šä½¿ç”¨è®°å¿†ã€‚
agent_chain.run(input="å¸–å­çš„ä½œè€…æ˜¯è°ï¼Ÿ")
```
