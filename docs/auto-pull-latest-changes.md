# è‡ªåŠ¨æ‹‰å–æœ€æ–°å˜æ›´åŠŸèƒ½

## åŠŸèƒ½è¯´æ˜

ç¿»è¯‘è„šæœ¬ç°åœ¨æ”¯æŒåœ¨æ£€æµ‹å˜æ›´ä¹‹å‰è‡ªåŠ¨æ‹‰å–æœ€æ–°çš„æºä»£ç ,ç¡®ä¿ç¿»è¯‘çš„æ˜¯æœ€æ–°ç‰ˆæœ¬çš„æ–‡æ¡£ã€‚

## å·¥ä½œåŸç†

### 1. è‡ªåŠ¨æ›´æ–°å­æ¨¡å—

åœ¨æ‰§è¡Œå¢é‡ç¿»è¯‘æ—¶,è„šæœ¬ä¼šè‡ªåŠ¨æ‰§è¡Œ:
```bash
git submodule update --remote langchain-ai-docs
```

è¿™ä¼šå°† `langchain-ai-docs` å­æ¨¡å—æ›´æ–°åˆ°è¿œç¨‹ä»“åº“çš„æœ€æ–°ç‰ˆæœ¬ã€‚

### 2. æ£€æµ‹å˜æ›´

æ›´æ–°å,è„šæœ¬ä¼šæ¯”è¾ƒ:
- **ä¸Šæ¬¡ç¿»è¯‘çš„ commit**: ä» `.translation-version.json` è¯»å–
- **å½“å‰æœ€æ–°çš„ commit**: æ›´æ–°åçš„å­æ¨¡å— HEAD

### 3. ç¿»è¯‘å˜æ›´

åªç¿»è¯‘ä¸¤ä¸ª commit ä¹‹é—´å˜æ›´çš„æ–‡ä»¶ã€‚

## ä½¿ç”¨æ–¹å¼

### é»˜è®¤è¡Œä¸º(è‡ªåŠ¨æ‹‰å–)
```bash
pnpm translate
```
- âœ… è‡ªåŠ¨æ›´æ–°å­æ¨¡å—åˆ°æœ€æ–°ç‰ˆæœ¬
- âœ… æ£€æµ‹å˜æ›´
- âœ… ç¿»è¯‘å˜æ›´çš„æ–‡ä»¶

### ç¦ç”¨è‡ªåŠ¨æ‹‰å–
å¦‚æœä½ æƒ³ä½¿ç”¨å½“å‰ç‰ˆæœ¬è€Œä¸æ›´æ–°,å¯ä»¥ä¿®æ”¹ä»£ç :

```typescript
// src/translate/index.ts ç¬¬ 312 è¡Œ
const diffResult = await getDiff(repoRootDir, versionFile, false, 'langchain-ai-docs');
//                                                          ^^^^^ è®¾ä¸º false
```

## æ‰§è¡Œæµç¨‹

```
å¼€å§‹ç¿»è¯‘
    â†“
ğŸ”„ æ‹‰å–æœ€æ–°å˜æ›´
    â”œâ”€ git submodule update --remote langchain-ai-docs
    â””â”€ âœ… å·²æ›´æ–°å­æ¨¡å—: langchain-ai-docs
    â†“
ğŸ” æ£€æµ‹å˜æ›´
    â”œâ”€ è¯»å–ä¸Šæ¬¡ç¿»è¯‘çš„ commit: d7e797c
    â”œâ”€ è·å–å½“å‰æœ€æ–° commit: c3f807f
    â””â”€ æ¯”è¾ƒå·®å¼‚
    â†“
ğŸ“Š æ£€æµ‹åˆ° 90 ä¸ªæ–‡ä»¶å˜æ›´
    â”œâ”€ æ–°å¢: 9
    â”œâ”€ ä¿®æ”¹: 77
    â”œâ”€ åˆ é™¤: 3
    â””â”€ é‡å‘½å: 1
    â†“
ğŸ”„ å¼€å§‹å¤„ç†å˜æ›´
    â””â”€ ç¿»è¯‘è¿›åº¦ |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 40% | 36/90 æ–‡ä»¶
```

## é”™è¯¯å¤„ç†

å¦‚æœæ‹‰å–å¤±è´¥(ä¾‹å¦‚ç½‘ç»œé—®é¢˜ã€æƒé™é—®é¢˜),è„šæœ¬ä¼š:
1. æ˜¾ç¤ºè­¦å‘Šä¿¡æ¯
2. ç»§ç»­ä½¿ç”¨å½“å‰ç‰ˆæœ¬è¿›è¡Œç¿»è¯‘
3. ä¸ä¼šä¸­æ–­ç¿»è¯‘æµç¨‹

ç¤ºä¾‹è¾“å‡º:
```
ğŸ”„ æ­£åœ¨æ‹‰å–æœ€æ–°å˜æ›´...
âš ï¸  æ‹‰å–å˜æ›´å¤±è´¥: fatal: unable to access 'https://...'
âš ï¸  å°†ç»§ç»­ä½¿ç”¨å½“å‰ç‰ˆæœ¬è¿›è¡Œç¿»è¯‘
ğŸ” æ£€æµ‹å˜æ›´: d7e797c -> d7e797c
```

## API è¯´æ˜

### `pullLatestChanges(repoPath, submodulePath?)`

æ‹‰å–æœ€æ–°çš„ Git å˜æ›´ã€‚

**å‚æ•°**:
- `repoPath`: ä»“åº“æ ¹ç›®å½•è·¯å¾„
- `submodulePath`: å¯é€‰,å­æ¨¡å—ç›¸å¯¹è·¯å¾„

**è¡Œä¸º**:
- å¦‚æœæä¾› `submodulePath`: æ›´æ–°æŒ‡å®šå­æ¨¡å—
- å¦‚æœä¸æä¾›: æ‹‰å–ä¸»ä»“åº“

**ç¤ºä¾‹**:
```typescript
// æ›´æ–°å­æ¨¡å—
pullLatestChanges('/path/to/repo', 'langchain-ai-docs');

// æ‹‰å–ä¸»ä»“åº“
pullLatestChanges('/path/to/repo');
```

### `getDiff(repoPath, versionFile, autoPull?, submodulePath?)`

è·å– Git å·®å¼‚ç»“æœã€‚

**å‚æ•°**:
- `repoPath`: ä»“åº“æ ¹ç›®å½•è·¯å¾„
- `versionFile`: ç‰ˆæœ¬è®°å½•æ–‡ä»¶è·¯å¾„
- `autoPull`: æ˜¯å¦è‡ªåŠ¨æ‹‰å–(é»˜è®¤ `true`)
- `submodulePath`: å¯é€‰,å­æ¨¡å—ç›¸å¯¹è·¯å¾„

**è¿”å›**:
```typescript
{
  changes: FileChange[],      // å˜æ›´çš„æ–‡ä»¶åˆ—è¡¨
  currentCommit: string,      // å½“å‰ commit hash
  previousCommit?: string     // ä¸Šæ¬¡ç¿»è¯‘çš„ commit hash
}
```

## æ‰‹åŠ¨æ›´æ–°å­æ¨¡å—

å¦‚æœä½ æƒ³æ‰‹åŠ¨æ§åˆ¶å­æ¨¡å—æ›´æ–°,å¯ä»¥:

```bash
# æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
git submodule update --remote langchain-ai-docs

# æŸ¥çœ‹å­æ¨¡å—çŠ¶æ€
git submodule status

# è¿›å…¥å­æ¨¡å—æŸ¥çœ‹
cd langchain-ai-docs
git log -1
```

## æ³¨æ„äº‹é¡¹

1. **ç½‘ç»œè¦æ±‚**: è‡ªåŠ¨æ‹‰å–éœ€è¦ç½‘ç»œè¿æ¥
2. **æƒé™è¦æ±‚**: éœ€è¦å¯¹å­æ¨¡å—ä»“åº“æœ‰è¯»å–æƒé™
3. **æœ¬åœ°ä¿®æ”¹**: å¦‚æœå­æ¨¡å—æœ‰æœªæäº¤çš„ä¿®æ”¹,æ‹‰å–å¯èƒ½å¤±è´¥
4. **å†²çªå¤„ç†**: å¦‚æœæœ‰å†²çª,éœ€è¦æ‰‹åŠ¨è§£å†³

## æœ€ä½³å®è·µ

1. **å®šæœŸç¿»è¯‘**: å»ºè®®æ¯å¤©è¿è¡Œä¸€æ¬¡ç¿»è¯‘,ä¿æŒè¯‘æ–‡æœ€æ–°
2. **æ£€æŸ¥æ—¥å¿—**: æ³¨æ„æ‹‰å–å¤±è´¥çš„è­¦å‘Šä¿¡æ¯
3. **ç‰ˆæœ¬æ§åˆ¶**: å®šæœŸæäº¤ç¿»è¯‘ç»“æœåˆ° Git
4. **å¤‡ä»½è¿›åº¦**: `.translation-progress.json` åŒ…å«é‡è¦çš„è¿›åº¦ä¿¡æ¯

## ç›¸å…³å‘½ä»¤

```bash
# æŸ¥çœ‹å­æ¨¡å—å½“å‰ç‰ˆæœ¬
cd langchain-ai-docs && git rev-parse HEAD

# æŸ¥çœ‹ä¸Šæ¬¡ç¿»è¯‘çš„ç‰ˆæœ¬
cat cn-docs/.translation-version.json

# æ‰‹åŠ¨æ›´æ–°å­æ¨¡å—
git submodule update --remote

# é‡ç½®å­æ¨¡å—åˆ°ç‰¹å®šç‰ˆæœ¬
cd langchain-ai-docs
git checkout <commit-hash>
cd ..
git add langchain-ai-docs
```
