---
title: ä¸º LangSmith å‘Šè­¦é…ç½® Webhook é€šçŸ¥
sidebarTitle: Configure webhook notifications for alerts
---
## æ¦‚è¿°

æœ¬æŒ‡å—è¯¦ç»†ä»‹ç»äº†å¦‚ä½•ä¸º [LangSmith è­¦æŠ¥](/langsmith/alerts) è®¾ç½® Webhook é€šçŸ¥ã€‚åœ¨ç»§ç»­ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²æŒ‰ç…§ [æ­¤æŒ‡å—](./alerts) å®Œæˆäº†åˆ›å»ºè­¦æŠ¥ç›´è‡³é€šçŸ¥æ­¥éª¤çš„æ‰€æœ‰æ“ä½œã€‚Webhook é€šè¿‡åœ¨è­¦æŠ¥æ¡ä»¶è§¦å‘æ—¶å‘é€ HTTP POST è¯·æ±‚ï¼Œå®ç°ä¸è‡ªå®šä¹‰æœåŠ¡å’Œç¬¬ä¸‰æ–¹å¹³å°çš„é›†æˆã€‚æ‚¨å¯ä»¥ä½¿ç”¨ Webhook å°†è­¦æŠ¥æ•°æ®è½¬å‘åˆ°å·¥å•ç³»ç»Ÿã€èŠå¤©åº”ç”¨ç¨‹åºæˆ–è‡ªå®šä¹‰ç›‘æ§è§£å†³æ–¹æ¡ˆã€‚

## å…ˆå†³æ¡ä»¶

*   ä¸€ä¸ªèƒ½å¤Ÿæ¥æ”¶ HTTP POST è¯·æ±‚çš„ç«¯ç‚¹
*   æ¥æ”¶æœåŠ¡æ‰€éœ€çš„é€‚å½“èº«ä»½éªŒè¯å‡­æ®ï¼ˆå¦‚æœéœ€è¦ï¼‰

## é›†æˆé…ç½®

### æ­¥éª¤ 1ï¼šå‡†å¤‡æ¥æ”¶ç«¯ç‚¹

åœ¨ LangSmith ä¸­é…ç½® Webhook ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„æ¥æ”¶ç«¯ç‚¹ï¼š

*   æ¥å— HTTP POST è¯·æ±‚
*   èƒ½å¤Ÿå¤„ç† JSON è´Ÿè½½
*   å¯ä»¥ä»å¤–éƒ¨æœåŠ¡è®¿é—®
*   å…·æœ‰é€‚å½“çš„èº«ä»½éªŒè¯æœºåˆ¶ï¼ˆå¦‚æœéœ€è¦ï¼‰

æ­¤å¤–ï¼Œå¦‚æœæ˜¯åœ¨è‡ªå®šä¹‰éƒ¨ç½²çš„ LangSmith ä¸Šï¼Œè¯·ç¡®ä¿æ²¡æœ‰é˜²ç«å¢™è®¾ç½®é˜»æ­¢æ¥è‡ª LangSmith æœåŠ¡çš„å‡ºå£æµé‡ã€‚

### æ­¥éª¤ 2ï¼šé…ç½® Webhook å‚æ•°

![Webhook è®¾ç½®](/langsmith/images/webhook-setup.png)

åœ¨è­¦æŠ¥çš„é€šçŸ¥éƒ¨åˆ†ï¼Œä½¿ç”¨ä»¥ä¸‹å‚æ•°å®Œæˆ Webhook é…ç½®ï¼š

**å¿…å¡«å­—æ®µ**

*   **URL**ï¼šæ¥æ”¶ç«¯ç‚¹çš„å®Œæ•´ URL
    *   ç¤ºä¾‹ï¼š`https://api.example.com/incident-webhook`

**å¯é€‰å­—æ®µ**

*   **Headers**ï¼šéš Webhook è¯·æ±‚ä¸€èµ·å‘é€çš„ JSON é”®å€¼å¯¹
    *   å¸¸è§æ ‡å¤´åŒ…æ‹¬ï¼š
 *   `Authorization`ï¼šç”¨äºèº«ä»½éªŒè¯ä»¤ç‰Œ
 *   `Content-Type`ï¼šé€šå¸¸è®¾ç½®ä¸º `application/json`ï¼ˆé»˜è®¤å€¼ï¼‰
 *   `X-Source`ï¼šç”¨äºæ ‡è¯†æ¥æºä¸º LangSmith
    *   å¦‚æœä¸éœ€è¦æ ‡å¤´ï¼Œåˆ™åªéœ€ä½¿ç”¨ `{}`

*   **è¯·æ±‚æ­£æ–‡æ¨¡æ¿**ï¼šè‡ªå®šä¹‰å‘é€åˆ°ç«¯ç‚¹çš„ JSON è´Ÿè½½
    *   é»˜è®¤ï¼šLangSmith å‘é€å®šä¹‰çš„è´Ÿè½½ï¼Œå¹¶åœ¨è´Ÿè½½æœ«å°¾é™„åŠ ä»¥ä¸‹é¢å¤–çš„é”®å€¼å¯¹ï¼š
 *   `project_name`ï¼šè§¦å‘è­¦æŠ¥çš„é¡¹ç›®åç§°
 *   `alert_rule_id`ï¼šç”¨äºæ ‡è¯† LangSmith è­¦æŠ¥çš„ UUIDã€‚è¿™å¯ä»¥åœ¨ Webhook æœåŠ¡ä¸­ç”¨ä½œå»é‡é”®ã€‚
 *   `alert_rule_name`ï¼šè­¦æŠ¥è§„åˆ™çš„åç§°ã€‚
 *   `alert_rule_type`ï¼šè­¦æŠ¥çš„ç±»å‹ï¼ˆæˆªè‡³ 2025 å¹´ 4 æœˆ 1 æ—¥ï¼Œæ‰€æœ‰è­¦æŠ¥å‡ä¸º `threshold` ç±»å‹ï¼‰ã€‚
 *   `alert_rule_attribute`ï¼šä¸è­¦æŠ¥è§„åˆ™å…³è”çš„å±æ€§ - `error_count`ã€`feedback_score` æˆ– `latency`ã€‚
 *   `triggered_metric_value`ï¼šè§¦å‘é˜ˆå€¼æ—¶æŒ‡æ ‡çš„å€¼ã€‚
 *   `triggered_threshold`ï¼šè§¦å‘è­¦æŠ¥çš„é˜ˆå€¼ã€‚
 *   `timestamp`ï¼šè§¦å‘è­¦æŠ¥çš„æ—¶é—´æˆ³ã€‚

### æ­¥éª¤ 3ï¼šæµ‹è¯• Webhook

ç‚¹å‡» **å‘é€æµ‹è¯•è­¦æŠ¥** ä»¥å‘é€ Webhook é€šçŸ¥ï¼Œç¡®ä¿é€šçŸ¥æŒ‰é¢„æœŸå·¥ä½œã€‚

## æ•…éšœæ’é™¤

å¦‚æœ Webhook é€šçŸ¥æœªé€è¾¾ï¼š

*   éªŒè¯ Webhook URL æ˜¯å¦æ­£ç¡®ä¸”å¯è®¿é—®
*   ç¡®ä¿ä»»ä½•èº«ä»½éªŒè¯æ ‡å¤´æ ¼å¼æ­£ç¡®
*   æ£€æŸ¥æ‚¨çš„æ¥æ”¶ç«¯ç‚¹æ˜¯å¦æ¥å— POST è¯·æ±‚
*   æ£€æŸ¥ç«¯ç‚¹çš„æ—¥å¿—ï¼ŒæŸ¥çœ‹æ˜¯å¦æ”¶åˆ°ä½†æ‹’ç»äº†è¯·æ±‚
*   éªŒè¯æ‚¨çš„è‡ªå®šä¹‰è´Ÿè½½æ¨¡æ¿æ˜¯å¦ä¸ºæœ‰æ•ˆçš„ JSON æ ¼å¼

## å®‰å…¨æ³¨æ„äº‹é¡¹

*   ä¸ºæ‚¨çš„ Webhook ç«¯ç‚¹ä½¿ç”¨ HTTPS
*   ä¸ºæ‚¨çš„ Webhook ç«¯ç‚¹å®æ–½èº«ä»½éªŒè¯
*   è€ƒè™‘åœ¨æ ‡å¤´ä¸­æ·»åŠ å…±äº«å¯†é’¥ä»¥éªŒè¯ Webhook æ¥æº
*   åœ¨å¤„ç†ä¼ å…¥çš„ Webhook è¯·æ±‚ä¹‹å‰å¯¹å…¶è¿›è¡ŒéªŒè¯

## ä½¿ç”¨ Webhook å°†è­¦æŠ¥å‘é€åˆ° Slack

ä»¥ä¸‹æ˜¯ä¸€ä¸ªé…ç½® LangSmith è­¦æŠ¥ä»¥ä½¿ç”¨ [`chat.postMessage`](https://api.slack.com/methods/chat.postMessage) API å‘ Slack é¢‘é“å‘é€é€šçŸ¥çš„ç¤ºä¾‹ã€‚

### å…ˆå†³æ¡ä»¶

*   æ‹¥æœ‰ Slack å·¥ä½œåŒºçš„è®¿é—®æƒé™
*   æ‹¥æœ‰ä¸€ä¸ªç”¨äºè®¾ç½®è­¦æŠ¥çš„ LangSmith é¡¹ç›®
*   æ‹¥æœ‰åˆ›å»º Slack åº”ç”¨ç¨‹åºçš„æƒé™

### æ­¥éª¤ 1ï¼šåˆ›å»º Slack åº”ç”¨

1.  è®¿é—® [Slack API åº”ç”¨ç¨‹åºé¡µé¢](https://api.slack.com/apps)
2.  ç‚¹å‡» **åˆ›å»ºæ–°åº”ç”¨**
3.  é€‰æ‹© **ä»å¤´å¼€å§‹**
4.  æä¾› **åº”ç”¨åç§°**ï¼ˆä¾‹å¦‚ï¼Œ"LangSmith Alerts"ï¼‰
5.  é€‰æ‹©æ‚¨è¦å®‰è£…è¯¥åº”ç”¨çš„å·¥ä½œåŒº
6.  ç‚¹å‡» **åˆ›å»ºåº”ç”¨**

### æ­¥éª¤ 2ï¼šé…ç½®æœºå™¨äººæƒé™

1.  åœ¨ Slack åº”ç”¨é…ç½®çš„å·¦ä¾§è¾¹æ ä¸­ï¼Œç‚¹å‡» **OAuth å’Œæƒé™**
2.  å‘ä¸‹æ»šåŠ¨åˆ° **èŒƒå›´** ä¸‹çš„ **æœºå™¨äººä»¤ç‰ŒèŒƒå›´**ï¼Œç„¶åç‚¹å‡» **æ·»åŠ  OAuth èŒƒå›´**
3.  æ·»åŠ ä»¥ä¸‹èŒƒå›´ï¼š
    *   `chat:write`ï¼ˆä»¥åº”ç”¨èº«ä»½å‘é€æ¶ˆæ¯ï¼‰
    *   `chat:write.public`ï¼ˆå‘åº”ç”¨ä¸åœ¨çš„é¢‘é“å‘é€æ¶ˆæ¯ï¼‰
    *   `channels:read`ï¼ˆæŸ¥çœ‹åŸºæœ¬é¢‘é“ä¿¡æ¯ï¼‰

### æ­¥éª¤ 3ï¼šå°†åº”ç”¨å®‰è£…åˆ°æ‚¨çš„å·¥ä½œåŒº

1.  å‘ä¸Šæ»šåŠ¨åˆ° **OAuth å’Œæƒé™** é¡µé¢é¡¶éƒ¨
2.  ç‚¹å‡» **å®‰è£…åˆ°å·¥ä½œåŒº**
3.  æŸ¥çœ‹æƒé™å¹¶ç‚¹å‡» **å…è®¸**
4.  å¤åˆ¶å‡ºç°çš„ **æœºå™¨äººç”¨æˆ· OAuth ä»¤ç‰Œ**ï¼ˆä»¥ `xoxb-` å¼€å¤´ï¼‰

### æ­¥éª¤ 4ï¼šå°†æœºå™¨äººæ·»åŠ åˆ° Slack é¢‘é“

å°†æœºå™¨äººæ·»åŠ åˆ°æ‚¨å¸Œæœ›æ¥æ”¶è­¦æŠ¥çš„ç‰¹å®šé¢‘é“ã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨æ¶ˆæ¯å­—æ®µä¸­æåŠæœºå™¨äººï¼ˆä¾‹å¦‚ï¼Œ`@botname`ï¼‰æ¥å°†å…¶æ·»åŠ åˆ° Slack é¢‘é“ã€‚

æ‚¨è¿˜éœ€è¦é¢‘é“ ID æ¥åœ¨ LangSmith ä¸­é…ç½® Webhook è­¦æŠ¥ã€‚æ‚¨å¯ä»¥é€šè¿‡æ‰“å¼€é¢‘é“è¯¦æƒ… > å…³äºæ¥æ‰¾åˆ°é¢‘é“ IDã€‚

### æ­¥éª¤ 5ï¼šåœ¨ LangSmith ä¸­é…ç½® Webhook è­¦æŠ¥

1.  åœ¨ LangSmith ä¸­ï¼Œå¯¼èˆªåˆ°æ‚¨çš„é¡¹ç›®
2.  é€‰æ‹© **è­¦æŠ¥ â†’ åˆ›å»ºè­¦æŠ¥**
3.  å®šä¹‰æ‚¨çš„è­¦æŠ¥æŒ‡æ ‡å’Œæ¡ä»¶
4.  åœ¨é€šçŸ¥éƒ¨åˆ†ï¼Œé€‰æ‹© **Webhook**
5.  ä½¿ç”¨ä»¥ä¸‹è®¾ç½®é…ç½® Webhookï¼š

**Webhook URL**

```json
https://slack.com/api/chat.postMessage
```

**Headers**

<Note>
å°† `xoxb-your-token-here` æ›¿æ¢ä¸ºæ‚¨çš„æœºå™¨äººç”¨æˆ· OAuth ä»¤ç‰Œ
</Note>

```json
{
  "Content-Type": "application/json",
  "Authorization": "Bearer xoxb-your-token-here"
}
```

**è¯·æ±‚æ­£æ–‡æ¨¡æ¿**

<Note>
å¿…é¡»å¡«å†™ä»æ­¥éª¤ 4 ä¸­æ‰¾åˆ°çš„ `{channel_id}` å€¼ã€‚<br /><br />å…¶ä½™å­—æ®µï¼š`alert_name`ã€`project_name` å’Œ `project_url` å¯é€‰åœ°ä¸ºè­¦æŠ¥æ¶ˆæ¯æ·»åŠ ä¸Šä¸‹æ–‡ã€‚æ‚¨å¯ä»¥åœ¨æµè§ˆå™¨çš„åœ°å€æ ä¸­æ‰¾åˆ°æ‚¨çš„ `project_url`ã€‚å¤åˆ¶ URL ä¸­ç›´åˆ°ä½†ä¸åŒ…æ‹¬ä»»ä½•æŸ¥è¯¢å‚æ•°çš„éƒ¨åˆ†ã€‚
</Note>

```json
{
  "channel": "{channel_id}",
  "text": "{alert_name} triggered for {project_name}",
  "blocks": [
    {
      "type": "section",
      "text": {
        "type": "mrkdwn",
        "text": "ğŸš¨{alert_name} has been triggered"
      }
    },
    {
      "type": "section",
      "text": {
        "type": "mrkdwn",
        "text": "Please check the following link for more information:"
      }
    },
    {
      "type": "section",
      "text": {
        "type": "mrkdwn",
        "text": "<{project-url}|View in LangSmith>"
      }
    }
  ]
}
```

6.  ç‚¹å‡» **ä¿å­˜** ä»¥æ¿€æ´» Webhook é…ç½®

### æ­¥éª¤ 6ï¼šæµ‹è¯•é›†æˆ

1.  åœ¨ LangSmith è­¦æŠ¥é…ç½®ä¸­ï¼Œç‚¹å‡» **æµ‹è¯•è­¦æŠ¥**
2.  æ£€æŸ¥æ‚¨æŒ‡å®šçš„ Slack é¢‘é“æ˜¯å¦æ”¶åˆ°æµ‹è¯•é€šçŸ¥
3.  éªŒè¯æ¶ˆæ¯æ˜¯å¦åŒ…å«é¢„æœŸçš„è­¦æŠ¥ä¿¡æ¯

### ï¼ˆå¯é€‰ï¼‰æ­¥éª¤ 7ï¼šåœ¨è¯·æ±‚æ­£æ–‡ä¸­é“¾æ¥åˆ°è­¦æŠ¥é¢„è§ˆ

åˆ›å»ºè­¦æŠ¥åï¼Œæ‚¨å¯ä»¥é€‰æ‹©åœ¨ Webhook çš„è¯·æ±‚æ­£æ–‡ä¸­é“¾æ¥åˆ°å…¶é¢„è§ˆã€‚

![è­¦æŠ¥é¢„è§ˆçª—æ ¼](/langsmith/images/alert-preview-pane.png)

é…ç½®æ–¹æ³•ï¼š

1.  ä¿å­˜æ‚¨çš„è­¦æŠ¥
2.  åœ¨è­¦æŠ¥è¡¨ä¸­æ‰¾åˆ°æ‚¨ä¿å­˜çš„è­¦æŠ¥å¹¶ç‚¹å‡»å®ƒ
3.  å¤åˆ¶æ˜¾ç¤ºçš„ URL
4.  ç‚¹å‡»"ç¼–è¾‘è­¦æŠ¥"
5.  å°†ç°æœ‰çš„é¡¹ç›® URL æ›¿æ¢ä¸ºå¤åˆ¶çš„è­¦æŠ¥é¢„è§ˆ URL

## å…¶ä»–èµ„æº

*   [LangSmith è­¦æŠ¥æ–‡æ¡£](/langsmith/alerts)
*   [Slack chat.postMessage API æ–‡æ¡£](https://api.slack.com/methods/chat.postMessage)
*   [Slack Block Kit æ„å»ºå™¨](https://app.slack.com/block-kit-builder/)
