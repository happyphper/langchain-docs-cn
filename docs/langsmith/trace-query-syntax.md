---
title: 追踪查询语法
sidebarTitle: Trace query syntax
---
使用 SDK 中的方法或 API 中的端点，您可以筛选运行记录进行分析和导出。

## 筛选参数

| 键名                          | 描述                                                                                                                                                                                                                    |
| ----------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `project_id` / `project_name` | 要从中获取运行记录的项目 - 可以是单个项目或项目列表。                                                                                                                                             |
| `trace_id`                    | 获取属于特定追踪（trace）的运行记录。                                                                                                                                                                                  |
| `run_type`                    | 要获取的运行类型，例如 `llm`、`chain`、`tool`、`retriever` 等。                                                                                                                                                      |
| `dataset_name` / `dataset_id` | 获取与指定数据集中示例行关联的运行记录。这对于在给定数据集上比较提示词或模型非常有用。                                                                              |
| `reference_example_id`        | 获取与特定示例行关联的运行记录。这对于在给定输入上比较提示词或模型非常有用。                                                                                                   |
| `parent_run_id`               | 获取给定运行的子运行记录。这对于获取使用上下文管理器分组在一起的运行记录或获取智能体轨迹非常有用。                                                                  |
| `error`                       | 获取出错或未出错的运行记录。                                                                                                                                                                                      |
| `run_ids`                     | 获取具有给定运行 ID 列表的运行记录。注意：**这将忽略所有其他筛选参数。**                                                                                                                             |
| `filter`                      | 获取匹配给定结构化筛选语句的运行记录。有关更多信息，请参阅下面的指南。                                                                                                                           |
| `trace_filter`                | 应用于追踪树中根运行（ROOT run）的筛选器。此参数旨在与常规 `filter` 参数结合使用，允许您根据追踪内根运行的属性来筛选运行记录。                            |
| `tree_filter`                 | 应用于追踪树中其他运行（包括同级和子运行）的筛选器。此参数旨在与常规 `filter` 参数结合使用，允许您根据追踪内任何运行的属性来筛选运行记录。 |
| `is_root`                     | 仅返回根运行记录。                                                                                                                                                                                                         |
| `select`                      | 选择要在响应中返回的字段。默认情况下，返回所有字段。有关可用字段，请参阅[运行数据格式](/langsmith/run-data-format)。                                                                                                                                              |
| `query` (_实验性_)      | 自然语言查询，可将您的查询转换为筛选语句。                                                                                                                                                   |

<Note>

<strong>性能提示</strong>：传递 `select` 参数并从列表中排除 `inputs` 和 `outputs` 可以显著提高查询性能并减少响应大小，特别是对于大型运行记录。

</Note>

## 筛选查询语言

LangSmith 支持强大的筛选功能，提供筛选查询语言，以便在获取运行记录时进行复杂的筛选操作。

筛选语法基于运行对象中字段的常见比较器。支持的比较器包括：

-   `gte` (大于或等于)
-   `gt` (大于)
-   `lte` (小于或等于)
-   `lt` (小于)
-   `eq` (等于)
-   `neq` (不等于)
-   `has` (检查运行是否包含标签或元数据 JSON 对象)
-   `search` (在字符串字段中搜索子字符串)

此外，您可以通过 `and` 运算符组合多个比较条件。

这些比较器可以应用于运行对象的字段，例如其 `id`、`name`、`run_type`、`start_time` / `end_time`、`latency`、`total_tokens`、`error`、`execution_order`、`tags`，以及通过 `feedback_key` 和 `feedback_score` 关联的任何反馈。
