---
title: BM25
---
BM25，也称为 [Okapi BM25](https://en.wikipedia.org/wiki/Okapi_BM25)，是一种用于信息检索系统的排序函数，用于估计文档与给定搜索查询的相关性。

您可以在检索流程中将其用作后处理步骤，在从其他来源检索到初始文档集后，对文档进行重新排序。

## 安装

`BM25Retriever` 从 `@langchain/community` 导出。您需要像这样安装它：

::: code-group

```bash [npm]
npm install @langchain/community @langchain/core
```

```bash [yarn]
yarn add @langchain/community @langchain/core
```

```bash [pnpm]
pnpm add @langchain/community @langchain/core
```

:::

该检索器使用了来自 Okapi BM25 的 [`这个实现`](https://github.com/FurkanToprak/OkapiBM25) 的代码。

## 用法

您现在可以使用先前检索到的文档创建一个新的检索器：

```typescript
import { BM25Retriever } from "@langchain/community/retrievers/bm25";

const retriever = BM25Retriever.fromDocuments([
  { pageContent: "Buildings are made out of brick", metadata: {} },
  { pageContent: "Buildings are made out of wood", metadata: {} },
  { pageContent: "Buildings are made out of stone", metadata: {} },
  { pageContent: "Cars are made out of metal", metadata: {} },
  { pageContent: "Cars are made out of plastic", metadata: {} },
  { pageContent: "mitochondria is the powerhouse of the cell", metadata: {} },
  { pageContent: "mitochondria is made of lipids", metadata: {} },
], { k: 4 });

// 将返回经过 BM25 算法重新排序的 4 个文档
await retriever.invoke("mitochondria");
```

```javascript
[
  { pageContent: 'mitochondria is made of lipids', metadata: {} },
  {
    pageContent: 'mitochondria is the powerhouse of the cell',
    metadata: {}
  },
  { pageContent: 'Buildings are made out of brick', metadata: {} },
  { pageContent: 'Buildings are made out of wood', metadata: {} }
]
```

```typescript

```
